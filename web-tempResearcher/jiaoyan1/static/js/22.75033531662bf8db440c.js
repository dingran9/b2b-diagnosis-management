webpackJsonp([22],{HNb7:function(e,t,a){"use strict";t.a={data:function(){return{yearOptions:[{id:2016,year:"2015~2016学年"},{id:2017,year:"2016~2017学年"},{id:2018,year:"2017~2018学年"},{id:2019,year:"2018~2019学年"},{id:2020,year:"2019~2012学年"},{id:2021,year:"2020~2021学年"}],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},dialogVisible:!1,dialogChangeDate:!1,next:!1,userStage:this.$user().get().userStage.split(","),bookVerison:[],shagnxiace:[],unitList:[],form:{year:"",grond:"",version:"",xueqi:""},form1:{year:"",grond:"",version:"",xueqi:""},tableData:[],time:""}},mounted:function(){},methods:{searchList:function(e,t){var a=this;if(!e.grond||!t||!e.version)return this.$message("请选择筛选条件");this.$ajax.getScheduleList({pageNum:1,pageSize:100,semester:t,gradeCode:e.grond,subjectCode:this.$user().get().userSubject,bookVersion:e.version,districtId:this.$user().get().userGroupAreaDistrictId}).then(function(e){var t=e.httpCode,o=e.result;200==t?a.tableData=o.list:a.$message("获取试卷列表失败,请刷新页面重试")})},getVersion:function(e){var t=this;if(e.version="",e.xueqi="",e.grond){var a={gradeCode:e.grond,subjectCode:this.$user().get().userSubject};this.$ajax.getBookTypeVersion(a).then(function(e){var a=e.httpCode,o=e.result;200==a?t.bookVerison=o:t.$message("获取试卷列表失败,请刷新页面重试")})}},huoqushangxiace:function(e){var t=this;if(e.xueqi="",e.version){var a={gradeCode:e.grond,subjectCode:this.$user().get().userSubject,booktypeCode:e.version,productsIds:"581c1b44f70541fc88f8658041477c6c",code:"0"};this.$ajax.getbookTypeVersionAndUnit(a).then(function(e){var a=e.httpCode,o=e.result;200==a?t.shagnxiace=o:"600002"!=a&&t.$message("获取学科列表失败,请刷新页面重试")})}},getUnit:function(e){var t=this;if(e.xueqi){var a={gradeCode:e.grond,subjectCode:this.$user().get().userSubject,booktypeCode:e.version,productsIds:"581c1b44f70541fc88f8658041477c6c",code:e.xueqi.substr(0,e.xueqi.length-1)};this.$ajax.getbookTypeVersionAndUnit(a).then(function(e){var a=e.httpCode,o=e.result;if(200==a){var i=[];o.forEach(function(e){i.push({time:"",unitName:e.name,unitCode:e.code})}),t.unitList=i}else t.$message("获取试卷列表失败,请刷新页面重试")})}},creatUnit:function(){var e=this,t=this.form1.year+""+(parseInt(this.form1.xueqi.substr(this.form1.xueqi.length-1,1))+1);this.unitList.forEach(function(a,o){a.startDate=e.getParamTime(a.time[0]),a.endDate=e.getParamTime(a.time[1]),a.semester=t,a.operatorCode=e.$user().get().userId,a.districtId=e.$user().get().userGroupAreaDistrictId,a.gradeCode=e.form1.grond,a.subjectCode=e.$user().get().userSubject,a.bookVersion=e.form1.version,a.sort=o+1}),this.saveAndUpdateDate(this.unitList,this.form1,t)},upUnitDate:function(){this.unitList[0].startDate=this.getParamTime(this.time[0]),this.unitList[0].endDate=this.getParamTime(this.time[1]),this.saveAndUpdateDate(this.unitList,this.form,this.form.year+this.form.xueqi)},saveAndUpdateDate:function(e,t,a){var o=this;this.$ajax.saveAndUpdateUnitSchedule({diagnosisUnitSchedules:e}).then(function(e){var i=e.httpCode;e.result;200==i?(o.dialogVisible=!1,o.dialogChangeDate=!1,o.next=!1,o.searchList(t,a)):o.$message("获取试卷列表失败,请刷新页面重试")})},handleEdit:function(e,t){this.dialogChangeDate=!0,this.unitList=[],this.unitList.push(t)},checkNext:function(){var e=this;if(!this.form1.xueqi)return this.$message("请选择学期");this.$ajax.getScheduleList({pageNum:1,pageSize:100,semester:this.form1.year+""+(parseInt(this.form1.xueqi.substr(this.form1.xueqi.length-1,1))+1),gradeCode:this.form1.grond,subjectCode:this.$user().get().userSubject,bookVersion:this.form1.version,districtId:this.$user().get().userGroupAreaDistrictId}).then(function(t){var a=t.httpCode,o=t.result;200==a?o.list.length>1?(e.$message("该学期进度已经创建,请在列表修改"),e.tableData=o.list,e.dialogVisible=!1,e.form={year:"",grond:"",version:"",xueqi:""},e.form1={year:"",grond:"",version:"",xueqi:""}):e.next=!0:e.$message("获取试卷列表失败,请刷新页面重试")})},handleClose:function(){this.dialogVisible=!1,this.next=!1,this.form1={year:"",grond:"",version:"",xueqi:""}},getParamTime:function(e){return e?this.dataParse(Date.parse(new Date(e))).substr(0,10):null}},filters:{times:function(e){function t(e){return e>9?e:"0"+e}var a=new Date(parseInt(e));return a.getFullYear()+"-"+t(a.getMonth()+1)+"-"+t(a.getDate())+" "}}}},Rdyr:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"syncCoach choose-wrap"},[a("section",{staticClass:"header"},[a("div",{staticClass:"title"},[e._v("\n      创建单元进度\n      "),a("span",{staticClass:"create",on:{click:function(t){e.dialogVisible=!0}}},[e._v("创建进度")])])]),e._v(" "),a("div",{staticClass:"filterSearch"},[a("el-form",{ref:"form",staticStyle:{"text-align":"left","margin-left":"40px"},attrs:{model:e.form,inline:!0}},[a("el-form-item",{attrs:{label:"学年"}},[a("el-select",{attrs:{placeholder:"请选择学年"},model:{value:e.form.year,callback:function(t){e.form.year=t},expression:"form.year"}},e._l(e.yearOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"年级"}},[a("el-select",{attrs:{placeholder:"请选择年级"},on:{change:function(t){e.getVersion(e.form)}},model:{value:e.form.grond,callback:function(t){e.form.grond=t},expression:"form.grond"}},[e.userStage.includes("1")?a("div",[a("el-option",{attrs:{label:"一年级",value:"11"}}),e._v(" "),a("el-option",{attrs:{label:"二年级",value:"12"}}),e._v(" "),a("el-option",{attrs:{label:"三年级",value:"13"}}),e._v(" "),a("el-option",{attrs:{label:"四年级",value:"14"}}),e._v(" "),a("el-option",{attrs:{label:"五年级",value:"15"}}),e._v(" "),a("el-option",{attrs:{label:"六年级",value:"16"}})],1):e._e(),e._v(" "),e.userStage.includes("2")?a("div",[a("el-option",{attrs:{label:"初一",value:"21"}}),e._v(" "),a("el-option",{attrs:{label:"初二",value:"22"}}),e._v(" "),a("el-option",{attrs:{label:"初三",value:"23"}})],1):e._e(),e._v(" "),e.userStage.includes("3")?a("div",[a("el-option",{attrs:{label:"高一",value:"31"}}),e._v(" "),a("el-option",{attrs:{label:"高二",value:"32"}}),e._v(" "),a("el-option",{attrs:{label:"高三",value:"33"}})],1):e._e()])],1),e._v(" "),a("el-form-item",{attrs:{label:"教材版本"}},[a("el-select",{attrs:{placeholder:"请选择教材版本"},on:{change:function(t){e.huoqushangxiace(e.form)}},model:{value:e.form.version,callback:function(t){e.form.version=t},expression:"form.version"}},e._l(e.bookVerison,function(e){return a("el-option",{key:e.ctb_code,attrs:{label:e.book_type,value:e.ctb_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"学期"}},[a("el-select",{attrs:{placeholder:"请选择学期"},model:{value:e.form.xueqi,callback:function(t){e.form.xueqi=t},expression:"form.xueqi"}},[a("el-option",{attrs:{label:"上册",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"下册",value:"2"}})],1)],1),e._v(" "),a("span",{staticClass:"search",on:{click:function(t){e.searchList(e.form,e.form.year+e.form.xueqi)}}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{"margin-left":"40px","max-width":"1145px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"unitName",label:"单元名称",width:"400"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startDate",label:"开始时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.startDate?a("span",[e._v(e._s(e._f("times")(t.row.startDate)))]):a("span",[e._v("待设置")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"endDate",label:"结束时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.endDate?a("span",[e._v(e._s(e._f("times")(t.row.endDate)))]):a("span",[e._v("待设置")])]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"修改时间",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"创建单元进度",visible:e.dialogVisible,"before-close":e.handleClose,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!e.next,expression:"!next"}],ref:"form",staticStyle:{"text-align":"left","margin-left":"40px"},attrs:{"label-position":"right",model:e.form1,"label-width":"80px"}},[a("el-form-item",{staticClass:"add-form-input",attrs:{label:"学年"}},[a("el-select",{attrs:{placeholder:"请选择学年"},model:{value:e.form.year,callback:function(t){e.form.year=t},expression:"form.year"}},e._l(e.yearOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.year,value:e.id}})}))],1),e._v(" "),a("el-form-item",{staticClass:"add-form-input",attrs:{label:"年级"}},[a("el-select",{attrs:{placeholder:"请选择年级"},on:{change:function(t){e.getVersion(e.form1)}},model:{value:e.form1.grond,callback:function(t){e.form1.grond=t},expression:"form1.grond"}},[e.userStage.includes("1")?a("div",[a("el-option",{attrs:{label:"一年级",value:"11"}}),e._v(" "),a("el-option",{attrs:{label:"二年级",value:"12"}}),e._v(" "),a("el-option",{attrs:{label:"三年级",value:"13"}}),e._v(" "),a("el-option",{attrs:{label:"四年级",value:"14"}}),e._v(" "),a("el-option",{attrs:{label:"五年级",value:"15"}}),e._v(" "),a("el-option",{attrs:{label:"六年级",value:"16"}})],1):e._e(),e._v(" "),e.userStage.includes("2")?a("div",[a("el-option",{attrs:{label:"初一",value:"21"}}),e._v(" "),a("el-option",{attrs:{label:"初二",value:"22"}}),e._v(" "),a("el-option",{attrs:{label:"初三",value:"23"}})],1):e._e(),e._v(" "),e.userStage.includes("3")?a("div",[a("el-option",{attrs:{label:"高一",value:"31"}}),e._v(" "),a("el-option",{attrs:{label:"高二",value:"32"}}),e._v(" "),a("el-option",{attrs:{label:"高三",value:"33"}})],1):e._e()])],1),e._v(" "),a("el-form-item",{staticClass:"add-form-input",attrs:{label:"教材版本"}},[a("el-select",{attrs:{placeholder:"请选择教材版本"},on:{change:function(t){e.huoqushangxiace(e.form1)}},model:{value:e.form1.version,callback:function(t){e.form1.version=t},expression:"form1.version"}},e._l(e.bookVerison,function(e){return a("el-option",{key:e.ctb_code,attrs:{label:e.book_type,value:e.ctb_code}})}))],1),e._v(" "),a("el-form-item",{staticClass:"add-form-input",attrs:{label:"学期"}},[a("el-select",{attrs:{placeholder:"请选择学期"},on:{change:function(t){e.getUnit(e.form1)}},model:{value:e.form1.xueqi,callback:function(t){e.form1.xueqi=t},expression:"form1.xueqi"}},e._l(e.shagnxiace,function(e,t){return a("el-option",{key:e.code,attrs:{label:e.name,value:e.code+t}})}))],1)],1),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.next,expression:"next"}]},e._l(e.unitList,function(t){return a("li",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{display:"inline-block",width:"150px","vertical-align":"middle"}},[e._v(e._s(t.unitName))]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","picker-options":e.pickerOptions,"start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"item.time"}})],1)})),e._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.next,expression:"!next"}],attrs:{type:"primary"},on:{click:function(t){e.checkNext()}}},[e._v("下一步")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.next,expression:"next"}],attrs:{type:"primary"},on:{click:function(t){e.creatUnit()}}},[e._v("确定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改日期",visible:e.dialogChangeDate,size:"tiny"},on:{"update:visible":function(t){e.dialogChangeDate=t}}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","picker-options":e.pickerOptions,"end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.upUnitDate()}}},[e._v("修改")])],1)],1)},i=[],r={render:o,staticRenderFns:i};t.a=r},lxCR:function(e,t,a){var o=a("uWWX");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("3fa23f2c",o,!0)},uWWX:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,'@charset "UTF-8";.content-right-title-wrap[data-v-ae0495c6]{text-align:left;margin:20px;background:#fff;border-radius:3px}.content-right-title-wrap .title[data-v-ae0495c6]{height:65px;line-height:65px;font-size:24px;padding:0 40px;color:#4c6175;border-bottom:1px solid #ddd}.content-right-title-wrap .body[data-v-ae0495c6]{line-height:80px;vertical-align:middle;padding:0 40px 10px}.content-right-title-wrap .body .body-title[data-v-ae0495c6]{width:80px;display:inline-block;color:#5e5e5e;font-size:18px}.content-right-title-wrap .body .body-btn[data-v-ae0495c6]{width:140px;font-size:18px;color:#505050;height:38px;line-height:38px;text-align:center;border-radius:19px;display:inline-block;vertical-align:middle;cursor:pointer;-webkit-transition:all .3s;transition:all .3s;margin-right:10px}.content-right-title-wrap .body .body-btn[data-v-ae0495c6]:hover{background-color:#d3eaf2}.content-right-title-wrap .body .body-btn.act[data-v-ae0495c6]{background-color:#3cc0fe;color:#fff}.content-right-body-wrap[data-v-ae0495c6]{text-align:center;margin:20px}.content-right-body-wrap[data-v-ae0495c6]:after{content:"";display:table;clear:both}.choose-wrap .header[data-v-ae0495c6]{margin:20px;margin-bottom:0;background:#fff}.choose-wrap .header .title[data-v-ae0495c6]{height:50px;text-align:left;padding:10px 40px;font-family:\ufeffMicrosoftYaHei-Bold;font-weight:700;font-size:18px;color:#4c6175;border-bottom:1px solid #e1e5ec}.choose-wrap .header .title .create[data-v-ae0495c6]{float:right;color:#fff;background-color:#50ced9;width:110px;height:35px;line-height:35px;text-align:center;border-radius:20px;margin-top:-3px;cursor:pointer}.choose-wrap .filterSearch[data-v-ae0495c6]{margin:20px;margin-bottom:0;background:#fff;padding-top:14px}.choose-wrap .filterSearch .search[data-v-ae0495c6]{display:inline-block;color:#fff;background-color:#50ced9;width:110px;height:35px;line-height:35px;text-align:center;border-radius:20px;cursor:pointer}.add-form-input[data-v-ae0495c6]{width:340px;margin:0 auto;margin-bottom:22px}.el-input__inner[data-v-ae0495c6]:focus,.el-input__inner[data-v-ae0495c6]:hover{border-color:#50ced9!important;color:#50ced9!important}.el-select-dropdown__item.selected.hover[data-v-ae0495c6],.el-select-dropdown__item.selected[data-v-ae0495c6]{background-color:#50ced9}.el-table[data-v-ae0495c6]:after{width:0}.el-table[data-v-ae0495c6]{border:0}.el-table__header-wrapper thead div[data-v-ae0495c6],.el-table th[data-v-ae0495c6],.el-table tr[data-v-ae0495c6]{background-color:#cfe8f5;color:#48576a}.el-button--primary[data-v-ae0495c6],.el-button--primary[data-v-ae0495c6]:focus,.el-button--primary[data-v-ae0495c6]:hover{color:#fff;background-color:#50ced9;border-color:#50ced9}.el-table th[data-v-ae0495c6]{text-align:center}.el-button[data-v-ae0495c6]:focus,.el-button[data-v-ae0495c6]:hover{border-color:#50ced9!important}',""])},uqv5:function(e,t,a){"use strict";function o(e){a("lxCR")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("HNb7"),r=a("Rdyr"),n=a("VU/8"),l=o,s=n(i.a,r.a,l,"data-v-ae0495c6",null);t.default=s.exports}});